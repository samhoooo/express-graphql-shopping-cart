# Shopping Cart with Express GraphQL Server

![NodeJS](https://img.shields.io/badge/node.js-6DA55F?style=for-the-badge&logo=node.js&logoColor=white)
![GraphQL](https://img.shields.io/badge/-GraphQL-E10098?style=for-the-badge&logo=graphql&logoColor=white)
![Postgres](https://img.shields.io/badge/postgres-%23316192.svg?style=for-the-badge&logo=postgresql&logoColor=white)

An example of a simple GraphQL server with [NodeJS](https://github.com/nodejs/node), [express-graphql](https://www.npmjs.com/package/express-graphql) and [knex with PostgreSQL](https://github.com/knex/knex), which is serving GraphQL API for e-commerce website featuring:

1. Get product details
1. Get cart details
1. Add / update / remove items from cart

## Prerequisites

1. Install Node.js version 16 or above
1. Running PostgreSQL on port 5432
1. Set up `.env` file with database information, please refer to the format of `.env.default`

## Installation and Running

1. Run `yarn install`
1. Make sure you have PostgreSQL running on port 5432. You can download PostgreSQL from [here](https://www.postgresql.org/download/)
1. Set up `.env` file with database host, port, name, user and password. Please refer to `.env.default` for exact format.
1. Run `yarn setDatabase` to set up schema on database
1. Run `yarn seedDatabase` to fill in sample data to database
1. Run `yarn build`
1. Run `yarn start` to start the application

Navigate to http://localhost:5000/graphql to see the GraphQL introspection.


## Available Queries and Mutations

### Queries
- `cartById(id: Int): Cart`
- `productById(id: Int): Product`
- `productByName(name: String): Product`

### Mutations
- `addProductToCart(productId: Int, cartId: Int): Cart`
- `removeProductFromCart(productId: Int, cartId: Int): Cart`
- `UpdateProductQuantityToCart(productId: Int, cartId: Int, quantity: Int): Cart`

## Schema Design

![image](https://user-images.githubusercontent.com/19681625/214701731-d6d275d8-c183-4d43-9e78-d650e00ab20c.png)

Generated by [GraphQL Voyager](https://github.com/IvanGoncharov/graphql-voyager)

